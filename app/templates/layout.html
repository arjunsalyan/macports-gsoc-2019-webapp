{% load static %}
{% load humanize %}

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'css/all.min.css' %}">
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/typeahead.bundle.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/handlebars.min-v4.7.6.js' %}"></script>
    {% block head_scripts %}
    {% endblock %}

    <title>{% block title %}{% endblock %} MacPorts</title>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
    <a class="navbar-brand" href="/"><img width="120px" src="{% static 'images/macports-logo.png' %}" class="img-fluid"></a>
    {% if request.path != '/' and request.path != '/search/' %}
        <form style="width: 50%" class="ml-4" method="get" action="/search">
            <div class="form-row">
                <div class="col-12" id="bloodhound">
                    <input type="text" class="quick-input-search form-control rounded-pill typeahead" id="q" name="q"
                           placeholder="Search for ports...">
                    <img class="quick-input-search-spinner" id="search-spinner" src="{% static 'images/spinner.gif' %}">
                    <button type="submit" class="quick-input-search-icon btn" id="search_submit"><i
                            class="fa fa-search"></i></button>
                    <input type="hidden" value="on" name="name">
                </div>
            </div>
        </form>
    {% endif %}

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item topnav-li {% if request.path == "/" %}active{% endif %}">
                <a class="nav-link topnav-a" href="/">Home</a>
            </li>
            <li class="nav-item topnav-li {% if request.path == "/search/" %}active{% endif %}">
                <a class="nav-link topnav-a" href="/search/">Ports</a>
            </li>
            <li class="nav-item topnav-li {% if request.path == "/all_builds/" %}active{% endif %}">
                <a class="nav-link topnav-a" href="/all_builds">All Builds</a>
            </li>
            <li class="nav-item topnav-li {% if '/statistics/' in request.path %}active{% endif %}" style="border: 0;">
                <a class="nav-link topnav-a" href="/statistics">Statistics</a>
            </li>
        </ul>
    </div>
    </div>
</nav>
<div class="container text-right">
    {% if user.is_authenticated %}
        <span class="f12">Hi, {{ user.first_name }}</span>
        <a href="{% url 'account_profile' %}" class="btn btn-link btn-sm p-0 m-0">Account</a> |
        <a href="{% url 'account_profile' %}" class="btn btn-link btn-sm p-0 m-0">Watchlist</a> |
        <a href="{% url 'account_logout' %}" class="btn btn-link btn-sm p-0 m-0">Logout</a>
    {% else %}
    <a href="{% url 'account_login' %}" class="btn btn-link btn-sm p-0">Login</a>
    {% endif %}
</div>
<div class="container">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-primary mt-2" role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    {% block content %}
    {% endblock %}
    <div id="searching-image" class="container text-center" style="height: 500px; display: none">
        <img src="{% static 'images/giphy.gif' %}">
    </div>
</div>
<br><br>
<div class="bg-secondary">
    <div class="container p-4 text-light">
        <div class="row">
            <div class="col-lg-4">
                <strong>
                    Quick Links:</strong>
                    <ul>
                        <li><a class="footer-links" href="{% url 'about_page' %}">About</a></li>
                        <li><a class="footer-links" href="{% url 'stats_faq' %}">Statistics FAQ</a></li>
                        <li><a class="footer-links" href="https://github.com/macports/macports-webapp">Git Repository</a></li>
                        <li><a class="footer-links" href="https://github.com/macports/macports-webapp/tree/master/docs">Documentation</a></li>
                        <li><a class="footer-links" href="https://github.com/macports/macports-webapp/tree/master/docs/api_v1">API</a></li>
                        <li><a class="footer-links" href="https://docs.google.com/document/d/1TqNHm3NrtLDelWqY7P4pZyTMZDJrlsPymFZklzV2t24/edit">Feature Requests</a></li>
                        <li><a class="footer-links" href="https://github.com/macports/macports-webapp/issues">Issues</a></li>
                    </ul>
            </div>
            <div class="col-lg-4">
                <strong>MacPorts</strong>
                <ul>
                    <li><a class="footer-links" href="https://www.macports.org">MacPorts Home</a></li>
                    <li><a class="footer-links" href="https://www.macports.org/install.php">Install MacPorts</a></li>
                    <li><a class="footer-links" href="https://trac.macports.org/wiki/FAQ">MacPorts FAQ</a></li>
                    <li><a class="footer-links" href="https://www.macports.org/news/">MacPorts News</a></li>
                </ul>
            </div>
            <div class="col-lg-4">
                Port Information was updated:<br>
                <i class="footer-links">{{ port_info_updated_at|naturaltime }}</i><br>
                <i><a class="footer-links" target="_blank" href="https://github.com/macports/macports-ports/commits/{{ port_info_updated_till_commit }}/">{{ port_info_updated_till_commit|slice:":8" }}</a></i><br><br>

                Most recent build (in app's database) ran:<br>
                <i><a class="footer-links" href="{% url 'all_builds' %}">{{ latest_build_fetched_at|naturaltime }}</a></i><br><br>

                Latest stats submission was received:<br>
                <i><a class="footer-links" href="{% url 'stats' %}">{{ latest_submission_made_at|naturaltime }}</a></i><br><br>

            </div>
    </div>
    </div>
</div>


{% block script %}
{% endblock %}
</body>
</html>
